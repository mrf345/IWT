{% load static %}
{% load gtranslate %}
{% load recaptcha2 %}
<!doctype html>
<html lang="en">
  <head>
    <title>{{ title }}</title>
    <link rel="shortcut icon" 
        href="https://lh3.googleusercontent.com/xYIyIRszLpnqJ8Um4T4s_Djt-jrarl8u8hGOQ2MhLTcG-N4wvH9FUvcdfE6mTLk0rbVEp2Z9YvTQmHdRXBVm002ZsG3mFKtc7AEitdXJlTEcW3jep8UDFQ30G6NHQnHnmPfleCIwn9nv4nUcpCdIC-I-b6z9QGCmA1cstPAD5PqXTOZkzS5E_47NFdh9rtpjSn7ia8afUK0uO628hWdvZrA78MvVWGvlm2i2tj7AXVZZXDgHIy79R3RyZCnf_nPfjQLGldTVOHKaMxoAzUtgRMDe-FFL6ITVniHfakoBwE1OiOVGyNwo5tN6LJR5Ef03VMa-_Rft_kwSS3yXlvUAiiM3he91H0amG6EGbkZfYMpJ5OfSknsL5MPvKn_beZpzMwvycwf2bHXpLYdZuri_x2mvLXMLefCFQM9gLOpNfZdzKVBNURyO3PUVeQppDQa1LXWC8Nz21enaaELuObZ6wufrSByHlv0CnBZOdNhD3qMFKw2kTmqA3z1vVmd483W5Gax9oWBDjdlpgNNy7Gl4Sn_GRQbjWc4hfaGUsyke3DpwsmH7-FwtWZGvXH0fbHgh9N13p-kIpQzJQ-mSAsIj8mrVJ_NJQy7qJnVb8wE=w178-h128-no"
    >
    <link rel="icon" type="image/gif" href="https://audio-sequence.github.io/iwt.gif" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" media="screen" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Changa|Amiri|Tajawal" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/spacing.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        window.addEventListener('load', function (e) {
            document.getElementsByClassName('itsLoading')[0].classList.add('hide')
            tagReady()
            $('#contactForm').attr('action', '//formspree.io/' + 'freequem' + '@' + 'gmail' + '.' + 'com')
            if ($('.toScrollMsg').length) $('html, body').animate({scrollTop: $('.toScrollMsg').offset().top}, 1000)
            if ($('#change_password').length && !$('.change_password').hasClass('hidden')) $('html, body').animate({scrollTop: $('#change_password').offset().top}, 1000)
            "{{to_activate}}".split(',').forEach(function (e, i) { $(e).addClass('active') })
        })
    </script>
    {% recaptcha_explicit_support %}
    {% recaptcha_init %}
  </head>
  <body>
    <div class="header wooden-shadow ">
        {% if not user.is_authenticated %}
        <div class="row">
            <div class="col-xs-12 col-md-4 col-md-offset-1 pt-3">
                <div class="col-xs-12 mt-2">
                    <center>
                        <img src="https://audio-sequence.github.io/iwt.gif" alt="Animated logo" class="img-responsive effect logo mv-2"
                            data-toggle="tooltip" data-placement="top" title="Video demonstration"
                            onclick="$('#modal-id').modal();"
                        >
                    </center>
                </div>
            </div>
            <div class="col-xs-12 col-md-5 col-md-offset-1">
                <div class="col-xs-12">
                    <p class='header-font h2 text-center inner-shadow-text default'>Click or Touch on the word or sentence :</p>
                </div>
                <div class="col-xs-12">
                    <div class="woodened">
                        <div class='h1 splitIt'>
                            {{ bypassed_stuff }}
                        </div>
                        <div style="text-align: center;">
                            <span class="fa fa-2x fa-headphones effect-text inner-shadow-text"
                                data-toggle="tooltip" data-placement="top" title="read all text"
                                onclick="readTranAll('.splitIt', false)"
                            ></span>
                            <span class="fa fa-2x fa-language effect-text inner-shadow-text"
                                data-toggle="tooltip" data-placement="top" title="Translate all text"
                                onclick="readTranAll('.splitIt', true);"
                            ></span>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 pt-3">
                    <form onchange="tagReady()">
                        <div class="col-xs-6">
                            <label for="readLang" class="inner-shadow-text fs-120">Reading in:</label>
                            <select id="readLang" name="readLang" class="form-control text-center">
                                <option value="en-us">American English</option>
                                <option value="en-uk">British English</option>
                                <option value="en-au">Australian English</option>
                            </select>
                        </div>
                        <div class="col-xs-6">
                            <label for="tranLang" class="inner-shadow-text fs-120">Translating to:</label>
                            <select id="tranLang" name="tranLang" class="form-control text-center">
                                <option value="fr">French</option>
                                <option value="en">English</option>
                                <option value="ar">Arabic</option>
                                <option value="it">Italian</option>
                                <option value="es">Spanish</option>
                            </select>
                        </div>
                        <div class="col-xs-6 mt-2">
                            <label for="actEvent" class="inner-shadow-text fs-120">Read when:</label>
                            <select id="actEvent" name="actEvent" class="form-control text-center">
                                <option value="click">Click or Touch</option>
                                <option value="mouseover">Mouse over</option>
                            </select>
                        </div>
                        <div class="col-xs-6 mt-2">
                            <label for="divider" class="inner-shadow-text fs-120">Splitter:</label>
                            <select id="divider" name="language" class="form-control text-center">
                                <option value=".">Full sentences</option>
                                <option value=".;,">Partial sentences</option>
                            </select>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% else %}
        <div class="row text-center">
            <div class="col-xs-12" >
                <center>
                    <img src="https://audio-sequence.github.io/iwt.gif" width='20%' style="transform: rotate(0);" alt="Animated logo" class="img-responsive effect logo"
                            onclick="$('#modal-id').modal();"
                    >
                </center>
            </div>
        </div>
        {% endif %}
        <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"></a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                {% if user.is_authenticated %}
                <ul class="nav navbar-nav">
                    <li class="dropdown" id='sorting'>
                        <a href="#" class="dropdown-toggle strong" data-toggle="dropdown">Sort by <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li id='recent'><a href="/texts_sorted/newest">Recent</a></li>
                            <li id='oldest'><a href="/texts_sorted/oldest">Oldest</a></li>
                            <li id='mostViewed'><a href="/texts_sorted/mostViewed">Most viewed</a></li>
                            <li id='leastViewed'><a href="/texts_sorted/leastViewed">Least viewed</a></li>
                            <li id='mostShared'><a href="/texts_sorted/mostShared">Most shared</a></li>
                            <li id='leastShared'><a href="/texts_sorted/leastShared">Least viewed</a></li>
                        </ul>
                    </li>
                    <li id='allTexts'><a href="/texts">Texts</a></li>
                    {% if user.username != 'Anonymous' %}
                    <li id='yourTexts'><a href="/texts_sorted/{{ user.id }}">Your texts</a></li>
                    {% endif %}
                </ul>
                <form class="navbar-form navbar-left" role="search" method="POST" action="/search_text">
                    {% csrf_token %}
                    <div class="form-group">
                        {{ form_search.text }}
                        <!-- <input type="text" class="form-control header-font" placeholder="Keywords to look for ..."> -->
                    </div>
                    <button type="submit" class="btn btn-default header-font strong">Search</button>
                </form>
                <ul class="nav navbar-nav navbar-right">
                    <li id='addText'><a href="/adding_text">Add text</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle strong" data-toggle="dropdown">Languages<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li id='english'>
                                <a href="#">
                                    <span class='fa fa-globe'></span>  English
                                </a>
                            </li>
                            <li id='arabic'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Arabic
                                </a>
                            </li>
                            <li id='french'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  French
                                </a>
                            </li>
                            <li id='italian'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Italian
                                </a>
                            </li>
                            <li id='spanish'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Spanish
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle strong" data-toggle="dropdown"> ({{ user.username }}) <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            {% if user.username != 'Anonymous' %}
                            <li id='changePassword'><a onclick="$('.change_password').toggleClass('hidden');$('#changePassword').toggleClass('active');"><span class='fa fa-pencil'></span> Change password</a></li>
                            <li id='deleteAccount'><a onclick="$('#delete').modal();"><span class='fa fa-trash'></span> Delete account</a></li>
                            {% endif %}
                            <li><a href="/logout_all"><span class='fa fa-sign-out'></span> Logout</a></li>
                        </ul>
                    </li>
                </ul>
                {% else %}
                <ul class="nav navbar-nav navbar-left">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle strong" data-toggle="dropdown">Languages<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li id='english'>
                                <a href="#">
                                    <span class='fa fa-globe'></span>  English
                                </a>
                            </li>
                            <li id='arabic'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Arabic
                                </a>
                            </li>
                            <li id='french'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  French
                                </a>
                            </li>
                            <li id='italian'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Italian
                                </a>
                            </li>
                            <li id='spanish'>
                                <a href="#">
                                        <span class='fa fa-language'></span>  Spanish
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                {% endif %}
            </div>
        </nav>
    </div>
    <div class="container">
        {% if messages %}
        {% for m in messages %}
            <div class="row">
                <div class="alertp-{{m.tags}} toScrollMsg">
                    <div class="alert alert-{{m.tags}} alert-dismissable default">
                        <button class="close" type="button" data-dismiss="alert"
                        onclick="$(this).parent().parent().parent().remove();">&times;</button>
                        <h3 class="text text-center header-font"> [ <strong>{{ m.tags.capitalize }}</strong>: {{ m }} ]</h3>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% endif %}
        {% if form_password and user.is_authenticated %}
        {% if user.username != 'Anonymous' %}
            <div class='row change_password hidden'>
                <div class="col-xs-12 alert m-2">
                    <form method='POST' action='/change_password' id='change_password'>
                        {% csrf_token %}
                        {{ form_register.non_field_errors }}
                        <div class='form-group'>
                            {{ form_password.password.errors }}
                            <label class='inner-shadow-text fs-130' for='{{ form_password.password.id_for_label }}'>Enter new password :</label>
                            {{ form_password.password }}
                        </div>
                        <p class="h2 main-font inner-shadow-text effect-text pull-right" style='cursor: pointer;'
                            onclick="$('#change_password').submit()"
                        >
                            Update
                        </p>
                    </form>
                </div>
            </div>
        {% endif %}
        {% endif %}
        {% block sibling_content %}{% endblock %}
    </div>
    <div class="footer wooden-shadow">
        <div class="row hidden contactUs">
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 text-center">
                <form id="contactForm" onchange="window.oldStoredForm = $(this).serialize();">
                    <div class="form-group">
                        <label for="name" class="inner-shadow-text fs-130 pull-left">Enter your name:</label>
                        <input name="name" type="text" placeholder="Your name" id="name" class="form-control inner-shadow">
                    </div>
                    <div class="form-group">
                        <label for="email" class="inner-shadow-text fs-130 pull-left">Enter your email:</label>
                        <input type="email" name="email" placeholder="example@gmail.com" id="email" class="form-control inner-shadow">
                    </div>
                    <div class="form-group">
                        <label for="msg" class="inner-shadow-text fs-130 pull-left">Enter your message:</label><br />
                        <textarea name="msg" id="msg" cols="30" class="form-control inner-shadow header-font" rows="10" placeholder="Hello dear developer ..."></textarea>
                    </div>
                    <input type="hidden" name="_subject" value="IWT support" />
                    <input type="text" name="_gotcha" style="display:none" />
                    <input type="hidden" name="_next" value="//fqms.github.io/#thankj" />
                </form>
            </div>
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 text-center">
                <div class="col-xs-4 pull-left">
                    <p class="h2 main-font inner-shadow-text effect-text" style='cursor: pointer;'
                        onclick="$('.contactUs').toggleClass('hidden'); $('.toUnBeat').toggleClass('beatit')"
                    >Cancel</p>
                </div>
                <div class="col-xs-4 pull-right">
                    <p class="h2 main-font inner-shadow-text effect-text" style='cursor: pointer;'
                        onclick="$('.toUnBeat').toggleClass('beatit'); if (window.oldStoredForm && window.oldStoredForm !== $('#contactForm').serialize()) $('#contactForm').submit(); else $('.contactUs').toggleClass('hidden');"
                    >Send</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-7 text-center default">
                <p class='header-font h3 inner-shadow-text'>Powered by Django and hosted on Heroku</p>
                <p class='header-font h3 inner-shadow-text' style='display: block;'>&copy; Since 2018 with undying love</p>
            </div>
            <div class="col-xs-4 text-center pt-1">
                <div class="col-xs-12 text-center pb-3 shareUs hidden">
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-share fa-facebook-official"
                            data-toggle="tooltip" data-placement="top" title="On Facebook"
                            onclick="window.open('https://www.facebook.com/sharer.php?u=' + window.location.origin, '_blank')"
                        ></span>
                    </div>
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-share fa-linkedin-square"
                            data-toggle="tooltip" data-placement="top" title="On Linkedin"
                            onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&amp;url=' + window.location.origin, '_blank')"
                        ></span>
                    </div>
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-share fa-google-plus-square"
                            data-toggle="tooltip" data-placement="top" title="On Google+"
                            onclick="window.open('https://plus.google.com/share?url=' + window.location.origin, '_blank')"
                        ></span>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-text fa-heart"
                            data-toggle="tooltip" data-placement="top" title="Share us"
                            onclick="$(this).toggleClass('beatit'); $('.shareUs').hasClass('hidden') ? $('.shareUs').animate({'opacity': '1'}).removeClass('hidden') : $('.shareUs').addClass('hidden'); $(document).scrollTop($(document).height())"
                        ></span>
                    </div>
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-text fa-github"
                            data-toggle="tooltip" data-placement="top" title="Source-code. Soon will be released"
                        ></span>
                    </div>
                    <div class="col-xs-12 col-sm-4">
                        <span class="fa fa-5x effect-text fa-envelope toUnBeat"
                            data-toggle="tooltip" data-placement="top" title="Contact us"
                            onclick="$(this).toggleClass('beatit'); $('.contactUs').toggleClass('hidden');$(document).scrollTop($(document).height());"
                        ></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Refresh icon to be removed onload -->
    <div class="itsLoading">
        <span class="fa fa-5x fa-refresh fa-spin inner-shadow-text-primary"></span>
    </div>
    <!-- A general modal -->
    <div class="modal fade default" id="modal-id">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                     aria-hidden="true" style='color: white;'
                    >&times;</button>
                    <p class="modal-title text-center h3">Modal title</p>
                </div>
                <div class="modal-body">
                    <h1>Non amet cillum qui id qui cillum exercitation ex aliqua ullamco Lorem non. Ipsum sint amet elit minim labore velit fugiat nulla labore deserunt esse aliquip. Id Lorem cillum dolore sit aliquip esse irure esse commodo eu proident ea adipisicing.</h1>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-modal fs-120 pull-left" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-default btn-modal fs-120" data-dismiss="modal">Submit it</button>
                </div>
            </div>
        </div>
    </div>
    {% if user.is_authenticated %}
    <div class="modal fade default" id="delete">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                     aria-hidden="true" style='color: white;'
                    >&times;</button>
                    <p class="modal-title text-center h3">Delete account</p>
                </div>
                <div class="modal-body">
                    <h1>Are you sure, you want to delete this account and all of its texts ?</h1>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-modal fs-120 pull-left" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-default btn-modal fs-120" 
                    onclick="window.location = '/delete'">Delete</button>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="{% static 'exFunctions.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/NicEdit/0.93/nicEdit.min.js"></script>
    </body>
</html>